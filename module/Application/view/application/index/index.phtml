<?php $this->headTitle('Main'); ?>
<?php $this->headScript()->captureStart(); ?>

// Anonymous self-executing function not to clutter global scope with temporary stuff
(function () {

    function init()
    {
        $('#members').on('click', function() {window.location.assign('/users');});
        $('#pages').on('click', function() {window.location.assign('/pages');});
        $('#revisions').on('click', function() {window.location.assign('/revisions');});
        $('#votes').on('click', function() {window.location.assign('/votes');});
        $('#roundup-users').on('click', function() {window.location.assign('/2018/users');});
        $('#roundup-pages').on('click', function() {window.location.assign('/2018/pages');});
    }

    $(document).ready(init);
}());

<?php $this->headScript()->captureEnd(); ?>
<?php $site = $this->site; ?>
<div class="row text-center bottom-buffer">        
    <div class="col-sm-6 col-xs-8 col-sm-offset-3 col-xs-offset-2">                
        <div class="row tile-row">                        
            <div class="col-xs-12 tile-main" onclick="window.location.assign('<?php echo $this->site->getUrl(); ?>')">
                <h1>
                    <?php echo $this->escapeHtml($this->site->getNativeName()); ?>
                </h1>
                <?php if ($site->getLastUpdate()): ?>
                <span class="small-text">
                    Updated <?php echo $site->getLastUpdate()->format('Y-m-d H:i'); ?>
                </span>
                <?php endif; ?>
            </div>            
        </div>
        <div class="row tile-row">
            <div class="col-sm-6 col-xs-12 tile-1">
                <div class="tile background-green" id="members">
                    <h2>
                        <span><?php echo number_format($site->getMembers(), 0, '.', ' '); ?></span>
                        <span class="tile-whitespace"></span>
                        <span>users</span>
                    </h2>
                    <ul class="list-unstyled tile-details">
                        <li><?php echo number_format($site->getActiveMembers(), 0, '.', ' '); ?> active</li>
                        <li><?php echo number_format($site->getContributors(), 0, '.', ' '); ?> contributors</li>
                        <li><?php echo number_format($site->getAuthors(), 0, '.', ' '); ?> authors</li>
                    </ul>        
                </div>
            </div>
            <div class = "col-sm-6 col-xs-12 tile-2">
                <div class="tile background-blue" id="pages">
                    <h2>
                        <span><?php echo number_format($site->getPages(), 0, '.', ' '); ?></span>
                        <span class="tile-whitespace"></span>
                        <span>pages</span>
                    </h2>
                    <ul class="list-unstyled tile-details">
                        <li> <?php echo number_format($site->getOriginals(), 0, '.', ' '); ?> originals </li>
                        <li> <?php echo number_format($site->getTranslations(), 0, '.', ' '); ?> translations </li>
                    </ul>        
                </div>
            </div>
        </div>
        <div class="row tile-row">
            <div class="col-sm-6 col-xs-12 tile-1">
                <div class = "tile background-red" id="votes">
                    <h2>
                        <span><?php echo number_format($site->getVotes(), 0, '.', ' '); ?></span>
                        <span class="tile-whitespace"></span>
                        <span>votes</span>
                    </h2>
                    <ul class="list-unstyled tile-details">
                        <li><?php echo number_format($site->getPositive(), 0, '.', ' '); ?> positive</li>
                        <li><?php echo number_format($site->getNegative(), 0, '.', ' '); ?> negative</li>
                    </ul>        
                </div>
            </div>
            <div class = "col-sm-6 col-xs-12 tile-2">
                <div class = "tile background-orange" id="revisions">
                    <h2>
                        <span><?php echo number_format($site->getRevisions(), 0, '.', ' '); ?></span>
                        <span class="tile-whitespace"></span>
                        <span>revisions</span>
                    </h2>
                </div>
            </div>            
        </div>
        <div class="row text-center tile-patreon">
            <span> If you enjoy ScpperDB please consider supporting it on Patreon. </span>
            <div class="top-buffer-small">
                <!-- Because Patreon's widget breaks the formatting -->
                <a id="patreon-button" href="https://www.patreon.com/bePatron?u=3965575&amp;redirect_uri=http%3A%2F%2Fscpper.com%2F&amp;utm_medium=widget">
                    <div id="patreon-button-content">
                    Become a patron
                    </div>
                </a>                
            </div>
        </div>        
    </div>
</div>